<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>islaiduTipai.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="islaiduTipai.html">islaiduTipai</a><ul class='methods'><li data-type='method'><a href="islaiduTipai.html#.getAll">getAll</a></li><li data-type='method'><a href="islaiduTipai.html#.getOne">getOne</a></li></ul></li><li><a href="mokejimuTipai.html">mokejimuTipai</a><ul class='methods'><li data-type='method'><a href="mokejimuTipai.html#.getAll">getAll</a></li><li data-type='method'><a href="mokejimuTipai.html#.getOne">getOne</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#close">close</a></li><li><a href="global.html#connect">connect</a></li><li><a href="global.html#getDb">getDb</a></li><li><a href="global.html#testConnection">testConnection</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">islaiduTipai.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { ObjectId } from "mongodb";
import { getDb } from "./db.js";
import { checkPermission } from "./sec.js";
import permissions from "../permissions.js";


/**
 * &lt;br>&lt;i>Operacijos su išlaidu tipais.&lt;/br>&lt;/i>
 * @namespace islaiduTipai
 */

/**
 * &lt;i>&lt;br>Grąžina sąrašą visų mokėjimų tipų.&lt;/br>&lt;/i>
 *
 * @param {string} userId - šią operaciją atliekančio vartotojo ID
 * @returns {Array&lt;{_id: MongoId, name: string}>} išlaidų tipų sąrašas
 * @throws {PermissionDenied} jei vartotojui neleidžiama atlikti šios operacijos
 * @memberof islaiduTipai
 */
async function getAll(userId) {
  await checkPermission(userId, permissions.islaiduTipaiRead);
  const db = await getDb();
  const rows = await db.collection("islaiduTipai").find({}, {
    sort: {
      pavadinimas: 1,
    },
  }).toArray();
  return rows;
}


/**
 * &lt;br>&lt;i>Grąžina mokėjimų tipus pagal id.&lt;/br>&lt;/i>
 *
 * @param {string} userId - šią operaciją atliekančio vartotojo ID
 * @param {string} _id - surasto išlaidų tipo ID
 * @param {boolean} [nocheck = false] - netikrina prisijungimo leidimo, jei "true"
 * @returns {{_id: MongoId, name: string}|null} islaidu tipas | null, jeigu nerastas
 * @throws {PermissionDenied} jei vartotojui neleidžiama atlikti šios operacijos
 * @memberof islaiduTipai
 */
async function getOne(userId, _id, nocheck) {
  if (nocheck) {
    await checkPermission(userId, permissions.pardavejaiRead);
  }
  const db = await getDb();
  if (!(_id instanceof ObjectId)) {
    _id = new ObjectId(_id);
  }
  const rows = await db.collection("islaiduTipai").find({ _id }).toArray();
  if (rows.length > 0) {
    return rows[0];
  }
  return null;
}

async function deleteOne(userId, _id) {
  await checkPermission(userId, permissions.islaiduTipaiDelete);
  const db = await getDb();
  if (!(_id instanceof ObjectId)) {
    _id = new ObjectId(_id);
  }
  const one = getOne(userId, _id);
  if (one) {
    await db.collection("islaiduTipai").deleteOne({ _id });
    return one;
  }
  return null;
}

async function insertOne(userId, pavadinimas) {
  await checkPermission(userId, permissions.islaiduTipaiInsert);
  if (typeof pavadinimas !== "string" || pavadinimas.trim() === "") {
    return null;
  }
  const db = await getDb();
  const newRecord = {
    pavadinimas,
  };
  await db.collection("islaiduTipai").insertOne(newRecord);
  return newRecord;
}

async function updateOne(userId, _id, pavadinimas) {
  await checkPermission(userId, permissions.islaiduTipaiUpdate);
  if (typeof pavadinimas !== "string" || pavadinimas.trim() === "") {
    return null;
  }
  const db = await getDb();
  if (!(_id instanceof ObjectId)) {
    _id = new ObjectId(_id);
  }
  await db.collection("islaiduTipai").updateOne({ _id }, {
    $set: { pavadinimas },
  });
  return getOne(userId, _id);
}

export { deleteOne, getAll, getOne, insertOne, updateOne };
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Thu Sep 16 2021 22:38:21 GMT+0300 (Rytų Europos vasaros laikas) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
